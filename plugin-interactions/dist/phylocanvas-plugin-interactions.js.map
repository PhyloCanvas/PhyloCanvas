{"version":3,"sources":["webpack://PhylocanvasPluginInteractions/webpack/universalModuleDefinition","webpack://PhylocanvasPluginInteractions/webpack/bootstrap","webpack://PhylocanvasPluginInteractions/external \"@cgps/phylocanvas\"","webpack://PhylocanvasPluginInteractions/../node_modules/events/events.js","webpack://PhylocanvasPluginInteractions/./node_modules/mouse-event-offset/index.js","webpack://PhylocanvasPluginInteractions/./node_modules/pan-zoom/index.js","webpack://PhylocanvasPluginInteractions/./node_modules/impetus/dist/impetus.js","webpack://PhylocanvasPluginInteractions/./node_modules/mouse-wheel/wheel.js","webpack://PhylocanvasPluginInteractions/./node_modules/to-px/topx.js","webpack://PhylocanvasPluginInteractions/./node_modules/parse-unit/index.js","webpack://PhylocanvasPluginInteractions/./node_modules/touch-pinch/index.js","webpack://PhylocanvasPluginInteractions/./node_modules/gl-vec2/distance.js","webpack://PhylocanvasPluginInteractions/./node_modules/dprop/index.js","webpack://PhylocanvasPluginInteractions/./node_modules/touch-position/index.js","webpack://PhylocanvasPluginInteractions/./defaults.js","webpack://PhylocanvasPluginInteractions/./tooltip.js","webpack://PhylocanvasPluginInteractions/./index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","this","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","events","existing","warning","TypeError","newListener","emit","unshift","push","length","warned","w","Error","String","emitter","count","console","warn","onceWrapper","arguments","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","rootPosition","left","top","ev","out","currentTarget","srcElement","isArray","cx","clientX","cy","clientY","rect","element","document","body","getBoundingClientRect","Impetus","wheel","touchPinch","cb","impetus","pos","lastY","lastX","source","update","x","y","e","dx","dy","dz","multiplier","friction","preventDefault","event","initialCoords","pinch","curr","pause","f1","f2","fingers","resume","prev","pinching","bounceDeceleration","bounceAcceleration","addEventListener","_ref","boundXmin","boundXmax","boundYmin","boundYmax","pointerLastX","pointerLastY","pointerCurrentX","pointerCurrentY","pointerId","decVelX","decVelY","_ref$source","sourceEl","updateCallback","_ref$multiplier","_ref$friction","initialValues","boundX","boundY","_ref$bounce","bounce","instance","Constructor","_classCallCheck","targetX","targetY","stopThreshold","ticking","pointerActive","paused","decelerating","trackingPoints","callUpdateCallback","normalizeEvent","touch","targetTouches","changedTouches","id","identifier","onDown","addTrackingPoint","onMove","getPassiveSupported","passive","onUp","stopTracking","requestAnimFrame","updateAndRender","firstPoint","lastPoint","xOffset","yOffset","D","time","diff","checkBounds","Math","abs","inBounds","stepDecelAnim","startDecelAnim","removeEventListener","Date","now","pointerChangeX","pointerChangeY","dragOutOfBoundsMultiplier","val","pow","restrict","xDiff","yDiff","adjust","querySelector","destroy","setValues","setMultiplier","setBoundX","setBoundY","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","passiveSupported","options","toPX","noScroll","lineHeight","deltaX","deltaY","deltaZ","scale","deltaMode","innerHeight","parseUnit","PIXELS_PER_INCH","getPropertyInPX","prop","parts","getComputedStyle","getPropertyValue","str","trim","toLowerCase","clientHeight","unit","testDIV","createElement","style","appendChild","size","removeChild","getSizeBrutal","innerWidth","min","max","num","parseFloat","match","getDistance","dprop","eventOffset","Finger","activeCount","lastDistance","ended","enabled","defineProperties","enable","disable","onTouchStart","onTouchMove","onTouchRemoved","indexOfTouch","newTouch","first","newIndex","oldIndex","newFinger","oldTouch","initialDistance","computeDistance","changed","movedTouch","idx","currentDistance","removed","otherIdx","otherTouch","a","b","sqrt","configurable","offset","attach","opt","touchstart","updateTouch","dispose","highlight","pan","selection","tooltip","zoom","visibleClass","hideTooltip","classList","remove","tree","decorate","panning","mousedown","offsetX","offsetY","visible","className","pointerEvents","onMouseDown","button","onMouseMove","interactions","point","utils","mapPoint","node","getNodeAtPoint","highlightNode","isLeaf","content","innerHTML","add","showTooltip","totalLeaves","onMouseUp","hasMoved","selectNode","metaKey","ctrlKey","delegate","ctx","canvas","panzoom","changeBranchScale","altKey","shiftKey","changeStepScale","minScale","pixelRatio","transform","maxScale","onselectstart","parent","defaults"],"mappings":"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","file":"phylocanvas-plugin-interactions.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@cgps/phylocanvas\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@cgps/phylocanvas\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PhylocanvasPluginInteractions\"] = factory(require(\"@cgps/phylocanvas\"));\n\telse\n\t\troot[\"PhylocanvasPluginInteractions\"] = factory(root[\"@cgps/phylocanvas\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","var rootPosition = { left: 0, top: 0 }\n\nmodule.exports = mouseEventOffset\nfunction mouseEventOffset (ev, target, out) {\n  target = target || ev.currentTarget || ev.srcElement\n  if (!Array.isArray(out)) {\n    out = [ 0, 0 ]\n  }\n  var cx = ev.clientX || 0\n  var cy = ev.clientY || 0\n  var rect = getBoundingClientOffset(target)\n  out[0] = cx - rect.left\n  out[1] = cy - rect.top\n  return out\n}\n\nfunction getBoundingClientOffset (element) {\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return rootPosition\n  } else {\n    return element.getBoundingClientRect()\n  }\n}\n","/**\n * @module  pan-zoom\n *\n * Events for pan and zoom\n */\n'use strict';\n\n\nconst Impetus = require('impetus');\nconst wheel = require('mouse-wheel');\nconst touchPinch = require('touch-pinch');\nconst position = require('touch-position');\n\n\nmodule.exports = panzoom;\n\n\nfunction panzoom (target, cb) {\n\tif (!target || !(cb instanceof Function)) return false;\n\n\n\t//enable panning\n\tlet pos = position({\n\t\telement: target\n\t});\n\n\tlet impetus;\n\n\tlet lastY = 0, lastX = 0;\n\timpetus = new Impetus({\n\t\tsource: target,\n\t\tupdate: (x, y) => {\n\t\t\tlet e = {\n\t\t\t\ttype: 'mouse',\n\t\t\t\tdx: x-lastX, dy: y-lastY, dz: 0,\n\t\t\t\tx: pos[0], y: pos[1]\n\t\t\t};\n\n\t\t\tlastX = x;\n\t\t\tlastY = y;\n\n\t\t\tcb(e);\n\t\t},\n\t\tmultiplier: 1,\n\t\tfriction: .75\n\t});\n\n\n\t//enable zooming\n\twheel(target, (dx, dy, dz, e) => {\n\t\te.preventDefault();\n\t\tcb({\n\t\t\ttype: 'mouse',\n\t\t\tdx: 0, dy: 0, dz: dy,\n\t\t\tx: pos[0], y: pos[1],\n\t\t\tevent: e,\n\t\t});\n\t});\n\n\t//mobile pinch zoom\n\tlet pinch = touchPinch(target);\n\tlet mult = 2;\n\tlet initialCoords;\n\n\tpinch.on('start', (curr) => {\n\t\timpetus && impetus.pause();\n\n\t\tlet [f1, f2] = pinch.fingers;\n\n\t\tinitialCoords = [f2.position[0]*.5 + f1.position[0]*.5, f2.position[1]*.5 + f1.position[1]*.5];\n\t});\n\tpinch.on('end', () => {\n\t\tinitialCoords = null;\n\n\t\timpetus && impetus.resume();\n\t});\n\tpinch.on('change', (curr, prev) => {\n\t\tif (!pinch.pinching || !initialCoords) return;\n\n\t\tcb({\n\t\t\ttype: 'touch',\n\t\t\tdx: 0, dy: 0, dz: -(curr - prev)*mult,\n\t\t\tx: initialCoords[0], y: initialCoords[1]\n\t\t});\n\t});\n}\n","(function (global, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(['exports', 'module'], factory);\n    } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n        factory(exports, module);\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod.exports, mod);\n        global.Impetus = mod.exports;\n    }\n})(this, function (exports, module) {\n    'use strict';\n\n    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\n    var stopThresholdDefault = 0.3;\n    var bounceDeceleration = 0.04;\n    var bounceAcceleration = 0.11;\n\n    // fixes weird safari 10 bug where preventDefault is prevented\n    // @see https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\n    window.addEventListener('touchmove', function () {});\n\n    var Impetus = function Impetus(_ref) {\n        var _ref$source = _ref.source;\n        var sourceEl = _ref$source === undefined ? document : _ref$source;\n        var updateCallback = _ref.update;\n        var _ref$multiplier = _ref.multiplier;\n        var multiplier = _ref$multiplier === undefined ? 1 : _ref$multiplier;\n        var _ref$friction = _ref.friction;\n        var friction = _ref$friction === undefined ? 0.92 : _ref$friction;\n        var initialValues = _ref.initialValues;\n        var boundX = _ref.boundX;\n        var boundY = _ref.boundY;\n        var _ref$bounce = _ref.bounce;\n        var bounce = _ref$bounce === undefined ? true : _ref$bounce;\n\n        _classCallCheck(this, Impetus);\n\n        var boundXmin, boundXmax, boundYmin, boundYmax, pointerLastX, pointerLastY, pointerCurrentX, pointerCurrentY, pointerId, decVelX, decVelY;\n        var targetX = 0;\n        var targetY = 0;\n        var stopThreshold = stopThresholdDefault * multiplier;\n        var ticking = false;\n        var pointerActive = false;\n        var paused = false;\n        var decelerating = false;\n        var trackingPoints = [];\n\n        /**\r\n         * Initialize instance\r\n         */\n        (function init() {\n            sourceEl = typeof sourceEl === 'string' ? document.querySelector(sourceEl) : sourceEl;\n            if (!sourceEl) {\n                throw new Error('IMPETUS: source not found.');\n            }\n\n            if (!updateCallback) {\n                throw new Error('IMPETUS: update function not defined.');\n            }\n\n            if (initialValues) {\n                if (initialValues[0]) {\n                    targetX = initialValues[0];\n                }\n                if (initialValues[1]) {\n                    targetY = initialValues[1];\n                }\n                callUpdateCallback();\n            }\n\n            // Initialize bound values\n            if (boundX) {\n                boundXmin = boundX[0];\n                boundXmax = boundX[1];\n            }\n            if (boundY) {\n                boundYmin = boundY[0];\n                boundYmax = boundY[1];\n            }\n\n            sourceEl.addEventListener('touchstart', onDown);\n            sourceEl.addEventListener('mousedown', onDown);\n        })();\n\n        /**\r\n         * In edge cases where you may need to\r\n         * reinstanciate Impetus on the same sourceEl\r\n         * this will remove the previous event listeners\r\n         */\n        this.destroy = function () {\n            sourceEl.removeEventListener('touchstart', onDown);\n            sourceEl.removeEventListener('mousedown', onDown);\n            // however it won't \"destroy\" a reference\n            // to instance if you'd like to do that\n            // it returns null as a convinience.\n            // ex: `instance = instance.destroy();`\n            return null;\n        };\n\n        /**\r\n         * Disable movement processing\r\n         * @public\r\n         */\n        this.pause = function () {\n            pointerActive = false;\n            paused = true;\n        };\n\n        /**\r\n         * Enable movement processing\r\n         * @public\r\n         */\n        this.resume = function () {\n            paused = false;\n        };\n\n        /**\r\n         * Update the current x and y values\r\n         * @public\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         */\n        this.setValues = function (x, y) {\n            if (typeof x === 'number') {\n                targetX = x;\n            }\n            if (typeof y === 'number') {\n                targetY = y;\n            }\n        };\n\n        /**\r\n         * Update the multiplier value\r\n         * @public\r\n         * @param {Number} val\r\n         */\n        this.setMultiplier = function (val) {\n            multiplier = val;\n            stopThreshold = stopThresholdDefault * multiplier;\n        };\n\n        /**\r\n         * Update boundX value\r\n         * @public\r\n         * @param {Number[]} boundX\r\n         */\n        this.setBoundX = function (boundX) {\n            boundXmin = boundX[0];\n            boundXmax = boundX[1];\n        };\n\n        /**\r\n         * Update boundY value\r\n         * @public\r\n         * @param {Number[]} boundY\r\n         */\n        this.setBoundY = function (boundY) {\n            boundYmin = boundY[0];\n            boundYmax = boundY[1];\n        };\n\n        /**\r\n         * Executes the update function\r\n         */\n        function callUpdateCallback() {\n            updateCallback.call(sourceEl, targetX, targetY);\n        }\n\n        /**\r\n         * Creates a custom normalized event object from touch and mouse events\r\n         * @param  {Event} ev\r\n         * @returns {Object} with x, y, and id properties\r\n         */\n        function normalizeEvent(ev) {\n            if (ev.type === 'touchmove' || ev.type === 'touchstart' || ev.type === 'touchend') {\n                var touch = ev.targetTouches[0] || ev.changedTouches[0];\n                return {\n                    x: touch.clientX,\n                    y: touch.clientY,\n                    id: touch.identifier\n                };\n            } else {\n                // mouse events\n                return {\n                    x: ev.clientX,\n                    y: ev.clientY,\n                    id: null\n                };\n            }\n        }\n\n        /**\r\n         * Initializes movement tracking\r\n         * @param  {Object} ev Normalized event\r\n         */\n        function onDown(ev) {\n            var event = normalizeEvent(ev);\n            if (!pointerActive && !paused) {\n                pointerActive = true;\n                decelerating = false;\n                pointerId = event.id;\n\n                pointerLastX = pointerCurrentX = event.x;\n                pointerLastY = pointerCurrentY = event.y;\n                trackingPoints = [];\n                addTrackingPoint(pointerLastX, pointerLastY);\n\n                // @see https://developers.google.com/web/updates/2017/01/scrolling-intervention\n                document.addEventListener('touchmove', onMove, getPassiveSupported() ? { passive: false } : false);\n                document.addEventListener('touchend', onUp);\n                document.addEventListener('touchcancel', stopTracking);\n                document.addEventListener('mousemove', onMove, getPassiveSupported() ? { passive: false } : false);\n                document.addEventListener('mouseup', onUp);\n            }\n        }\n\n        /**\r\n         * Handles move events\r\n         * @param  {Object} ev Normalized event\r\n         */\n        function onMove(ev) {\n            ev.preventDefault();\n            var event = normalizeEvent(ev);\n\n            if (pointerActive && event.id === pointerId) {\n                pointerCurrentX = event.x;\n                pointerCurrentY = event.y;\n                addTrackingPoint(pointerLastX, pointerLastY);\n                requestTick();\n            }\n        }\n\n        /**\r\n         * Handles up/end events\r\n         * @param {Object} ev Normalized event\r\n         */\n        function onUp(ev) {\n            var event = normalizeEvent(ev);\n\n            if (pointerActive && event.id === pointerId) {\n                stopTracking();\n            }\n        }\n\n        /**\r\n         * Stops movement tracking, starts animation\r\n         */\n        function stopTracking() {\n            pointerActive = false;\n            addTrackingPoint(pointerLastX, pointerLastY);\n            startDecelAnim();\n\n            document.removeEventListener('touchmove', onMove);\n            document.removeEventListener('touchend', onUp);\n            document.removeEventListener('touchcancel', stopTracking);\n            document.removeEventListener('mouseup', onUp);\n            document.removeEventListener('mousemove', onMove);\n        }\n\n        /**\r\n         * Records movement for the last 100ms\r\n         * @param {number} x\r\n         * @param {number} y [description]\r\n         */\n        function addTrackingPoint(x, y) {\n            var time = Date.now();\n            while (trackingPoints.length > 0) {\n                if (time - trackingPoints[0].time <= 100) {\n                    break;\n                }\n                trackingPoints.shift();\n            }\n\n            trackingPoints.push({ x: x, y: y, time: time });\n        }\n\n        /**\r\n         * Calculate new values, call update function\r\n         */\n        function updateAndRender() {\n            var pointerChangeX = pointerCurrentX - pointerLastX;\n            var pointerChangeY = pointerCurrentY - pointerLastY;\n\n            targetX += pointerChangeX * multiplier;\n            targetY += pointerChangeY * multiplier;\n\n            if (bounce) {\n                var diff = checkBounds();\n                if (diff.x !== 0) {\n                    targetX -= pointerChangeX * dragOutOfBoundsMultiplier(diff.x) * multiplier;\n                }\n                if (diff.y !== 0) {\n                    targetY -= pointerChangeY * dragOutOfBoundsMultiplier(diff.y) * multiplier;\n                }\n            } else {\n                checkBounds(true);\n            }\n\n            callUpdateCallback();\n\n            pointerLastX = pointerCurrentX;\n            pointerLastY = pointerCurrentY;\n            ticking = false;\n        }\n\n        /**\r\n         * Returns a value from around 0.5 to 1, based on distance\r\n         * @param {Number} val\r\n         */\n        function dragOutOfBoundsMultiplier(val) {\n            return 0.000005 * Math.pow(val, 2) + 0.0001 * val + 0.55;\n        }\n\n        /**\r\n         * prevents animating faster than current framerate\r\n         */\n        function requestTick() {\n            if (!ticking) {\n                requestAnimFrame(updateAndRender);\n            }\n            ticking = true;\n        }\n\n        /**\r\n         * Determine position relative to bounds\r\n         * @param {Boolean} restrict Whether to restrict target to bounds\r\n         */\n        function checkBounds(restrict) {\n            var xDiff = 0;\n            var yDiff = 0;\n\n            if (boundXmin !== undefined && targetX < boundXmin) {\n                xDiff = boundXmin - targetX;\n            } else if (boundXmax !== undefined && targetX > boundXmax) {\n                xDiff = boundXmax - targetX;\n            }\n\n            if (boundYmin !== undefined && targetY < boundYmin) {\n                yDiff = boundYmin - targetY;\n            } else if (boundYmax !== undefined && targetY > boundYmax) {\n                yDiff = boundYmax - targetY;\n            }\n\n            if (restrict) {\n                if (xDiff !== 0) {\n                    targetX = xDiff > 0 ? boundXmin : boundXmax;\n                }\n                if (yDiff !== 0) {\n                    targetY = yDiff > 0 ? boundYmin : boundYmax;\n                }\n            }\n\n            return {\n                x: xDiff,\n                y: yDiff,\n                inBounds: xDiff === 0 && yDiff === 0\n            };\n        }\n\n        /**\r\n         * Initialize animation of values coming to a stop\r\n         */\n        function startDecelAnim() {\n            var firstPoint = trackingPoints[0];\n            var lastPoint = trackingPoints[trackingPoints.length - 1];\n\n            var xOffset = lastPoint.x - firstPoint.x;\n            var yOffset = lastPoint.y - firstPoint.y;\n            var timeOffset = lastPoint.time - firstPoint.time;\n\n            var D = timeOffset / 15 / multiplier;\n\n            decVelX = xOffset / D || 0; // prevent NaN\n            decVelY = yOffset / D || 0;\n\n            var diff = checkBounds();\n\n            if (Math.abs(decVelX) > 1 || Math.abs(decVelY) > 1 || !diff.inBounds) {\n                decelerating = true;\n                requestAnimFrame(stepDecelAnim);\n            }\n        }\n\n        /**\r\n         * Animates values slowing down\r\n         */\n        function stepDecelAnim() {\n            if (!decelerating) {\n                return;\n            }\n\n            decVelX *= friction;\n            decVelY *= friction;\n\n            targetX += decVelX;\n            targetY += decVelY;\n\n            var diff = checkBounds();\n\n            if (Math.abs(decVelX) > stopThreshold || Math.abs(decVelY) > stopThreshold || !diff.inBounds) {\n\n                if (bounce) {\n                    var reboundAdjust = 2.5;\n\n                    if (diff.x !== 0) {\n                        if (diff.x * decVelX <= 0) {\n                            decVelX += diff.x * bounceDeceleration;\n                        } else {\n                            var adjust = diff.x > 0 ? reboundAdjust : -reboundAdjust;\n                            decVelX = (diff.x + adjust) * bounceAcceleration;\n                        }\n                    }\n                    if (diff.y !== 0) {\n                        if (diff.y * decVelY <= 0) {\n                            decVelY += diff.y * bounceDeceleration;\n                        } else {\n                            var adjust = diff.y > 0 ? reboundAdjust : -reboundAdjust;\n                            decVelY = (diff.y + adjust) * bounceAcceleration;\n                        }\n                    }\n                } else {\n                    if (diff.x !== 0) {\n                        if (diff.x > 0) {\n                            targetX = boundXmin;\n                        } else {\n                            targetX = boundXmax;\n                        }\n                        decVelX = 0;\n                    }\n                    if (diff.y !== 0) {\n                        if (diff.y > 0) {\n                            targetY = boundYmin;\n                        } else {\n                            targetY = boundYmax;\n                        }\n                        decVelY = 0;\n                    }\n                }\n\n                callUpdateCallback();\n\n                requestAnimFrame(stepDecelAnim);\n            } else {\n                decelerating = false;\n            }\n        }\n    }\n\n    /**\r\n     * @see http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n     */\n    ;\n\n    module.exports = Impetus;\n    var requestAnimFrame = (function () {\n        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {\n            window.setTimeout(callback, 1000 / 60);\n        };\n    })();\n\n    function getPassiveSupported() {\n        var passiveSupported = false;\n\n        try {\n            var options = Object.defineProperty({}, \"passive\", {\n                get: function get() {\n                    passiveSupported = true;\n                }\n            });\n\n            window.addEventListener(\"test\", null, options);\n        } catch (err) {}\n\n        getPassiveSupported = function () {\n            return passiveSupported;\n        };\n        return passiveSupported;\n    }\n});\n","'use strict'\n\nvar toPX = require('to-px')\n\nmodule.exports = mouseWheelListen\n\nfunction mouseWheelListen(element, callback, noScroll) {\n  if(typeof element === 'function') {\n    noScroll = !!callback\n    callback = element\n    element = window\n  }\n  var lineHeight = toPX('ex', element)\n  var listener = function(ev) {\n    if(noScroll) {\n      ev.preventDefault()\n    }\n    var dx = ev.deltaX || 0\n    var dy = ev.deltaY || 0\n    var dz = ev.deltaZ || 0\n    var mode = ev.deltaMode\n    var scale = 1\n    switch(mode) {\n      case 1:\n        scale = lineHeight\n      break\n      case 2:\n        scale = window.innerHeight\n      break\n    }\n    dx *= scale\n    dy *= scale\n    dz *= scale\n    if(dx || dy || dz) {\n      return callback(dx, dy, dz, ev)\n    }\n  }\n  element.addEventListener('wheel', listener)\n  return listener\n}\n","'use strict'\n\nvar parseUnit = require('parse-unit')\n\nmodule.exports = toPX\n\nvar PIXELS_PER_INCH = 96\n\nfunction getPropertyInPX(element, prop) {\n  var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop))\n  return parts[0] * toPX(parts[1], element)\n}\n\n//This brutal hack is needed\nfunction getSizeBrutal(unit, element) {\n  var testDIV = document.createElement('div')\n  testDIV.style['font-size'] = '128' + unit\n  element.appendChild(testDIV)\n  var size = getPropertyInPX(testDIV, 'font-size') / 128\n  element.removeChild(testDIV)\n  return size\n}\n\nfunction toPX(str, element) {\n  element = element || document.body\n  str = (str || 'px').trim().toLowerCase()\n  if(element === window || element === document) {\n    element = document.body \n  }\n  switch(str) {\n    case '%':  //Ambiguous, not sure if we should use width or height\n      return element.clientHeight / 100.0\n    case 'ch':\n    case 'ex':\n      return getSizeBrutal(str, element)\n    case 'em':\n      return getPropertyInPX(element, 'font-size')\n    case 'rem':\n      return getPropertyInPX(document.body, 'font-size')\n    case 'vw':\n      return window.innerWidth/100\n    case 'vh':\n      return window.innerHeight/100\n    case 'vmin':\n      return Math.min(window.innerWidth, window.innerHeight) / 100\n    case 'vmax':\n      return Math.max(window.innerWidth, window.innerHeight) / 100\n    case 'in':\n      return PIXELS_PER_INCH\n    case 'cm':\n      return PIXELS_PER_INCH / 2.54\n    case 'mm':\n      return PIXELS_PER_INCH / 25.4\n    case 'pt':\n      return PIXELS_PER_INCH / 72\n    case 'pc':\n      return PIXELS_PER_INCH / 6\n  }\n  return 1\n}","module.exports = function parseUnit(str, out) {\n    if (!out)\n        out = [ 0, '' ]\n\n    str = String(str)\n    var num = parseFloat(str, 10)\n    out[0] = num\n    out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n    return out\n}","var getDistance = require('gl-vec2/distance')\nvar EventEmitter = require('events').EventEmitter\nvar dprop = require('dprop')\nvar eventOffset = require('mouse-event-offset')\n\nmodule.exports = touchPinch\nfunction touchPinch (target) {\n  target = target || window\n\n  var emitter = new EventEmitter()\n  var fingers = [ null, null ]\n  var activeCount = 0\n\n  var lastDistance = 0\n  var ended = false\n  var enabled = false\n\n  // some read-only values\n  Object.defineProperties(emitter, {\n    pinching: dprop(function () {\n      return activeCount === 2\n    }),\n\n    fingers: dprop(function () {\n      return fingers\n    })\n  })\n\n  enable()\n  emitter.enable = enable\n  emitter.disable = disable\n  emitter.indexOfTouch = indexOfTouch\n  return emitter\n\n  function indexOfTouch (touch) {\n    var id = touch.identifier\n    for (var i = 0; i < fingers.length; i++) {\n      if (fingers[i] &&\n        fingers[i].touch &&\n        fingers[i].touch.identifier === id) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  function enable () {\n    if (enabled) return\n    enabled = true\n    target.addEventListener('touchstart', onTouchStart, false)\n    target.addEventListener('touchmove', onTouchMove, false)\n    target.addEventListener('touchend', onTouchRemoved, false)\n    target.addEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function disable () {\n    if (!enabled) return\n    enabled = false\n    activeCount = 0\n    fingers[0] = null\n    fingers[1] = null\n    lastDistance = 0\n    ended = false\n    target.removeEventListener('touchstart', onTouchStart, false)\n    target.removeEventListener('touchmove', onTouchMove, false)\n    target.removeEventListener('touchend', onTouchRemoved, false)\n    target.removeEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function onTouchStart (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var newTouch = ev.changedTouches[i]\n      var id = newTouch.identifier\n      var idx = indexOfTouch(id)\n\n      if (idx === -1 && activeCount < 2) {\n        var first = activeCount === 0\n\n        // newest and previous finger (previous may be undefined)\n        var newIndex = fingers[0] ? 1 : 0\n        var oldIndex = fingers[0] ? 0 : 1\n        var newFinger = new Finger()\n\n        // add to stack\n        fingers[newIndex] = newFinger\n        activeCount++\n\n        // update touch event & position\n        newFinger.touch = newTouch\n        eventOffset(newTouch, target, newFinger.position)\n\n        var oldTouch = fingers[oldIndex] ? fingers[oldIndex].touch : undefined\n        emitter.emit('place', newTouch, oldTouch)\n\n        if (!first) {\n          var initialDistance = computeDistance()\n          ended = false\n          emitter.emit('start', initialDistance)\n          lastDistance = initialDistance\n        }\n      }\n    }\n  }\n\n  function onTouchMove (ev) {\n    var changed = false\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var movedTouch = ev.changedTouches[i]\n      var idx = indexOfTouch(movedTouch)\n      if (idx !== -1) {\n        changed = true\n        fingers[idx].touch = movedTouch // avoid caching touches\n        eventOffset(movedTouch, target, fingers[idx].position)\n      }\n    }\n\n    if (activeCount === 2 && changed) {\n      var currentDistance = computeDistance()\n      emitter.emit('change', currentDistance, lastDistance)\n      lastDistance = currentDistance\n    }\n  }\n\n  function onTouchRemoved (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var removed = ev.changedTouches[i]\n      var idx = indexOfTouch(removed)\n\n      if (idx !== -1) {\n        fingers[idx] = null\n        activeCount--\n        var otherIdx = idx === 0 ? 1 : 0\n        var otherTouch = fingers[otherIdx] ? fingers[otherIdx].touch : undefined\n        emitter.emit('lift', removed, otherTouch)\n      }\n    }\n\n    if (!ended && activeCount !== 2) {\n      ended = true\n      emitter.emit('end')\n    }\n  }\n\n  function computeDistance () {\n    if (activeCount < 2) return 0\n    return getDistance(fingers[0].position, fingers[1].position)\n  }\n}\n\nfunction Finger () {\n  this.position = [0, 0]\n  this.touch = null\n}\n","module.exports = distance\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nfunction distance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1]\n    return Math.sqrt(x*x + y*y)\n}","module.exports = defaultProperty\n\nfunction defaultProperty (get, set) {\n  return {\n    configurable: true,\n    enumerable: true,\n    get: get,\n    set: set\n  }\n}\n","var offset = require('mouse-event-offset');\nvar EventEmitter = require('events').EventEmitter;\n\nfunction attach (opt) {\n  opt = opt || {};\n  var element = opt.element || window;\n\n  var emitter = new EventEmitter();\n\n  var position = opt.position || [0, 0];\n  if (opt.touchstart !== false) {\n    element.addEventListener('mousedown', update, false);\n    element.addEventListener('touchstart', updateTouch, false);\n  }\n\n  element.addEventListener('mousemove', update, false);\n  element.addEventListener('touchmove', updateTouch, false);\n\n  emitter.position = position;\n  emitter.dispose = dispose;\n  return emitter;\n\n  function updateTouch (ev) {\n    var touch = ev.targetTouches[0];\n    update(touch);\n  }\n\n  function update (ev) {\n    offset(ev, element, position);\n    emitter.emit('move', ev);\n  }\n\n  function dispose () {\n    element.removeEventListener('mousemove', update, false);\n    element.removeEventListener('mousedown', update, false);\n    element.removeEventListener('touchmove', updateTouch, false);\n    element.removeEventListener('touchstart', updateTouch, false);\n  }\n}\n\nmodule.exports = function (opt) {\n  return attach(opt).position;\n};\n\nmodule.exports.emitter = function (opt) {\n  return attach(opt);\n};\n","export default {\n  highlight: true,\n  pan: true,\n  selection: true,\n  tooltip: true,\n  zoom: true,\n};\n","const visibleClass = 'phylocanvas-tooltip-visible';\n\nexport function createTooltipElement() {\n  const element = document.createElement('div');\n\n  element.className = 'phylocanvas-tooltip';\n  element.style.position = 'absolute';\n  element.style.pointerEvents = 'none';\n\n  return element;\n}\n\nexport function showTooltip(element, x, y, content) {\n  element.innerHTML = content;\n\n  element.style.left = `${x}px`;\n  element.style.top = `${y}px`;\n\n  element.classList.add(visibleClass);\n}\n\nexport function hideTooltip(element) {\n  element.classList.remove(visibleClass);\n}\n","import defaults from './defaults';\nimport panzoom from 'pan-zoom';\nimport { utils } from '@cgps/phylocanvas';\n\nimport { createTooltipElement, showTooltip, hideTooltip } from './tooltip';\n\nexport default function (tree, decorate) {\n  const panning = {\n    mousedown: false,\n    offsetX: undefined,\n    offsetY: undefined,\n  };\n  const tooltip = {\n    visible: false,\n    element: createTooltipElement(),\n  };\n\n  function onMouseDown(e) {\n    if (e.button === 1) {\n      e.preventDefault();\n    }\n    panning.mousedown = true;\n    panning.offsetX = tree.state.offsetX;\n    panning.offsetY = tree.state.offsetY;\n  }\n\n  function onMouseMove(e) {\n    if (panning.mousedown) {\n      if (tree.state.interactions.tooltip && tooltip.visible) {\n        hideTooltip(tooltip.element);\n        tooltip.visible = false;\n      }\n      return;\n    }\n\n    const point = utils.mapPoint(tree, e.offsetX, e.offsetY);\n    const node = tree.getNodeAtPoint(point.x, point.y);\n\n    if (tree.state.interactions.highlight) {\n      tree.highlightNode(node);\n    }\n\n    if (tree.state.interactions.tooltip) {\n      if (node && !node.isLeaf) {\n        showTooltip(tooltip.element, e.clientX, e.clientY, node.totalLeaves);\n        tooltip.visible = true;\n      } else if (tooltip.visible) {\n        hideTooltip(tooltip.element);\n        tooltip.visible = false;\n      }\n    }\n  }\n\n  decorate('mergeState', (delegate, args) => {\n    if (tooltip.visible) {\n      hideTooltip(tooltip.element);\n      tooltip.visible = false;\n    }\n    if (tree.state.interactions.highlight) {\n      tree.highlightNode(null);\n    }\n    delegate(...args);\n  });\n\n  function onMouseUp(e) {\n    panning.mousedown = false;\n    const offsetX = tree.state.offsetX - panning.offsetX;\n    const offsetY = tree.state.offsetY - panning.offsetY;\n    const hasMoved = offsetX !== 0 || offsetY !== 0;\n\n    if (tree.state.interactions.selection && e.button === 0 && !hasMoved) {\n      const point = utils.mapPoint(tree, e.offsetX, e.offsetY);\n      const node = tree.getNodeAtPoint(point.x, point.y);\n      tree.selectNode(node, e.metaKey || e.ctrlKey);\n    }\n  }\n\n  tree.ctx.canvas.addEventListener('mousemove', onMouseMove);\n  tree.ctx.canvas.addEventListener('mousedown', onMouseDown);\n  tree.ctx.canvas.addEventListener('touchstart', onMouseDown);\n  tree.ctx.canvas.addEventListener('mouseup', onMouseUp);\n  tree.ctx.canvas.addEventListener('touchend', onMouseUp);\n\n  panzoom(tree.ctx.canvas, ({ dx, dy, dz, x, y, event }) => {\n    if (dz !== 0 && dx === 0 && dy === 0) {\n      if (tree.state.interactions.zoom) {\n        if (event && (event.metaKey || event.ctrlKey)) {\n          tree.changeBranchScale(dz < 0 ? 1 : -1, { x, y });\n        } else if (event && (event.altKey || event.shiftKey)) {\n          tree.changeStepScale(dz < 0 ? 1 : -1, { x, y });\n        } else {\n          if (\n            dz > 0 &&\n            tree.state.scale > tree.state.minScale * tree.pixelRatio\n          ) {\n            tree.transform(0, 0, -1, { x, y });\n          } else if (\n            dz < 0 &&\n            tree.state.scale < tree.state.maxScale * tree.pixelRatio\n          ) {\n            tree.transform(0, 0, 1, { x, y });\n          }\n        }\n      }\n    } else {\n      if (tree.state.interactions.pan) {\n        tree.transform(dx, dy, 0, { x, y });\n      }\n    }\n  });\n\n  tree.ctx.canvas.onselectstart = function () {\n    return false;\n  };\n\n  decorate('getInitialState', (delegate, args) => {\n    const [ options ] = args;\n    const { interactions = {} } = options;\n\n    const parent =\n      typeof options.parent === 'string'\n        ? document.querySelector(options.parent)\n        : options.parent || document.body;\n    parent.appendChild(tooltip.element);\n\n    return {\n      ...delegate(...args),\n      interactions: {\n        ...defaults,\n        ...interactions,\n      },\n    };\n  });\n\n  decorate('destroy', (delegate, args) => {\n    tree.ctx.canvas.removeEventListener('mousemove', onMouseMove);\n    tree.ctx.canvas.removeEventListener('mousedown', onMouseDown);\n    tree.ctx.canvas.removeEventListener('touchstart', onMouseDown);\n    tree.ctx.canvas.removeEventListener('mouseup', onMouseUp);\n    tree.ctx.canvas.removeEventListener('touchend', onMouseUp);\n    hideTooltip(tooltip.element);\n    delegate(...args);\n  });\n}\n"],"sourceRoot":""}