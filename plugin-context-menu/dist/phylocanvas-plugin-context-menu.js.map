{"version":3,"sources":["webpack://PhylocanvasPluginContextMenu/webpack/universalModuleDefinition","webpack://PhylocanvasPluginContextMenu/webpack/bootstrap","webpack://PhylocanvasPluginContextMenu/external \"@cgps/phylocanvas\"","webpack://PhylocanvasPluginContextMenu/./closeMenu.js","webpack://PhylocanvasPluginContextMenu/./mergeMenuItems.js","webpack://PhylocanvasPluginContextMenu/./render.js","webpack://PhylocanvasPluginContextMenu/./show.js","webpack://PhylocanvasPluginContextMenu/./openMenu.js","webpack://PhylocanvasPluginContextMenu/./about.js","webpack://PhylocanvasPluginContextMenu/./createHtmlElements.js","webpack://PhylocanvasPluginContextMenu/./menuItems.js","webpack://PhylocanvasPluginContextMenu/./defaults.js","webpack://PhylocanvasPluginContextMenu/./index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","closeMenu","tree","contextMenu","el","classList","remove","isOpen","mergeMenuItems","base","extra","length","menu","map","section","Array","from","item","splice","index","text","handler","node","trigger","method","isActive","createSublist","menuItems","sublist","document","createElement","menuItem","listElement","HTMLElement","appendChild","menuItemContent","visible","isToggle","buttonElement","addEventListener","invalidate","label","createTextNode","toggle","add","close","e","preventDefault","hasChildNodes","getStartPoint","start","size","minBound","maxBound","x","y","parent","style","top","bottom","left","right","width","offsetWidth","height","offsetHeight","scrollY","innerHeight","scrollX","innerWidth","isTop","isLeft","transformOrigin","removeChild","openMenu","nodeId","getNodeById","firstChild","isLeaf","nodeMenuItems","treeMenuItems","undefined","render","show","anchorElement","imageElement","src","title","href","target","className","windowURL","URL","webkitURL","createBlobUrl","data","type","blob","Blob","createObjectURL","createAnchorElement","filename","getBlobUrl","download","createLeafLabelsLink","filenames","leafLabels","getLeafLabels","join","createNewickLink","newick","getNewick","toggleLeafLabels","state","renderLeafLabels","toggleAlignLeafLabels","alignLabels","fitInPanel","collapsedIds","resetCollapsedNodes","refit","setSource","nodes","originalSource","selectedIds","getNodeLabels","createSelectedLabelsLink","image","ctx","canvas","toDataURL","createImageLink","aboutSection","indexOf","id","collapseNode","rotateNode","setRoot","rerootNode","decorate","openContextMenu","point","utils","mapPoint","offsetX","offsetY","getNodeAtPoint","open","pageX","pageY","delegate","args","querySelector","body","defaults","handleTouchStartEvent","touching","handleContextMenuEvent","handleMouseDownEvent","button","stopImmediatePropagation","handleMouseUpEvent","removeEventListener"],"mappings":"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","file":"phylocanvas-plugin-context-menu.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@cgps/phylocanvas\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@cgps/phylocanvas\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PhylocanvasPluginContextMenu\"] = factory(require(\"@cgps/phylocanvas\"));\n\telse\n\t\troot[\"PhylocanvasPluginContextMenu\"] = factory(root[\"@cgps/phylocanvas\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export default function closeMenu(tree) {\n  tree.contextMenu.el.classList.remove('visible');\n  tree.contextMenu.isOpen = false;\n}\n","export default function mergeMenuItems(base, extra = []) {\n  if (extra.length === 0) {\n    return base;\n  }\n  const menu = base.map(section => Array.from(section));\n  for (const item of extra) {\n    menu[item.section].splice(item.index, 0, {\n      text: item.text,\n      handler: item.handler ?\n        item.handler :\n        (tree, node) => tree.trigger(item.method, [ tree, node ]),\n      isActive: item.isActive,\n    });\n  }\n  return menu;\n}\n","function createSublist(tree, menuItems, node) {\n  const { el } = tree.contextMenu;\n\n  const sublist = document.createElement('ul');\n  for (const menuItem of menuItems) {\n    let listElement = null;\n\n    if (menuItem instanceof HTMLElement) {\n      listElement = document.createElement('li');\n      listElement.appendChild(menuItem);\n    } else if (typeof menuItem === 'function') {\n      const menuItemContent = menuItem(tree, node);\n      if (menuItemContent) {\n        listElement = document.createElement('li');\n        listElement.appendChild(menuItemContent);\n      }\n    } else {\n      const { text, handler, visible, isActive } = menuItem;\n      if (visible ? visible(tree) : true) {\n        listElement = document.createElement('li');\n\n        const isToggle = typeof isActive === 'function';\n\n        const buttonElement = document.createElement('button');\n        buttonElement.addEventListener('click', () => {\n          if (isToggle) tree.contextMenu.invalidate = false;\n          handler(tree, node);\n        });\n\n        const label = typeof text === 'function' ? text(tree, node) : text;\n        buttonElement.appendChild(document.createTextNode(label));\n\n        if (isToggle) {\n          const toggle = document.createElement('span');\n          toggle.classList.add('phylocanvas-context-menu-toggle');\n          if (isActive(tree, node)) toggle.classList.add('is-active');\n          buttonElement.appendChild(toggle);\n          buttonElement.classList.add('phylocanvas-context-menu-has-toggle');\n          listElement.addEventListener('click', () => {\n            if (isActive(tree, node)) {\n              toggle.classList.add('is-active');\n            } else {\n              toggle.classList.remove('is-active');\n            }\n          });\n        }\n\n        listElement.appendChild(buttonElement);\n      }\n    }\n\n    if (listElement) {\n      if (!menuItem.isActive) {\n        listElement.addEventListener('click', () => tree.contextMenu.close());\n      }\n      listElement.addEventListener('contextmenu', e => {\n        e.preventDefault();\n        return false;\n      });\n\n      sublist.appendChild(listElement);\n    }\n  }\n\n  if (sublist.hasChildNodes()) {\n    el.appendChild(sublist);\n  }\n}\n\nexport default function createMenuItems(tree, node) {\n  const { el } = tree.contextMenu;\n  while (el.hasChildNodes()) {\n    el.removeChild(el.firstChild);\n  }\n\n  const menuItems =\n    node && !node.isLeaf ?\n      tree.contextMenu.nodeMenuItems :\n      tree.contextMenu.treeMenuItems;\n\n  for (const subgroup of menuItems) {\n    createSublist(tree, subgroup, node || undefined);\n  }\n}\n","function getStartPoint(start, size, minBound, maxBound) {\n  if (start + size < minBound + maxBound) {\n    return start;\n  }\n\n  if (start - size > minBound) {\n    return start - size;\n  }\n\n  return minBound;\n}\n\nexport default function (contextMenu, x, y) {\n  const { el, parent } = contextMenu;\n\n  el.classList.remove('visible', 'top', 'bottom', 'left', 'right');\n  el.style.top = el.style.bottom = el.style.left = el.style.right = null;\n\n  const width = el.offsetWidth;\n  const height = el.offsetHeight;\n\n  const top = getStartPoint(y, height, window.scrollY, window.innerHeight);\n  const left = getStartPoint(x, width, window.scrollX, window.innerWidth);\n  const isTop = (top + height / 2) > y;\n  const isLeft = (left + width / 2) > x;\n\n  el.style.left = `${left}px`;\n  el.style.top = `${top}px`;\n\n  el.style.transformOrigin =\n    `${isTop ? 'top' : 'bottom'} ${isLeft ? 'left' : 'right'}`;\n\n  parent.removeChild(el);\n  parent.appendChild(el);\n  void el.offsetWidth; // trigger reflow\n\n  el.classList.add('visible');\n}\n","import render from './render';\nimport show from './show';\n\nexport default function openMenu(tree, x, y, nodeId) {\n  const node = nodeId ? tree.getNodeById(nodeId) : null;\n  render(tree, node);\n  show(tree.contextMenu, x, y);\n  tree.contextMenu.isOpen = true;\n}\n","function createAboutLink() {\n  const anchorElement = document.createElement('a');\n  const imageElement = document.createElement('img');\n  imageElement.src = 'data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20id%3D%22Micro%22%20viewBox%3D%220%200%20433.16%20103.04%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bisolation%3Aisolate%3B%7D.cls-2%7Bfill%3A%233b7383%3B%7D.cls-3%7Bopacity%3A0.53%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3ELOGOS%20OCT%202018%3C%2Ftitle%3E%3Cg%20class%3D%22cls-1%22%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M110.22%2C28.17H126c3.28%2C0%2C5.75.58%2C7.39%2C1.73a7.58%2C7.58%2C0%2C0%2C1%2C3.14%2C4.54%2C32.31%2C32.31%2C0%2C0%2C1%2C.67%2C7.3%2C31.25%2C31.25%2C0%2C0%2C1-.7%2C7.2%2C7.87%2C7.87%2C0%2C0%2C1-3.14%2C4.61c-1.62%2C1.17-4.08%2C1.76-7.36%2C1.76h-12.1V72.2h-3.71Zm15%2C23.81a10.15%2C10.15%2C0%2C0%2C0%2C5.47-1.15A5.25%2C5.25%2C0%2C0%2C0%2C133%2C47.6a26%2C26%2C0%2C0%2C0%2C.51-5.86%2C27.48%2C27.48%2C0%2C0%2C0-.48-5.89%2C5%2C5%2C0%2C0%2C0-2.27-3.17%2C10.71%2C10.71%2C0%2C0%2C0-5.51-1.12H113.93V52Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M165.45%2C52.75a29.42%2C29.42%2C0%2C0%2C0-.57-6.91A4%2C4%2C0%2C0%2C0%2C162.73%2C43a13.56%2C13.56%2C0%2C0%2C0-5.15-.7q-4%2C0-5.86%2C1.56a6.85%2C6.85%2C0%2C0%2C0-2.27%2C4.1%2C44.88%2C44.88%2C0%2C0%2C0-.45%2C7.33V72.2h-3.58V24.65H149V43.92h.26a7.06%2C7.06%2C0%2C0%2C1%2C3-3.52q2.17-1.35%2C6.59-1.35a13.48%2C13.48%2C0%2C0%2C1%2C6.53%2C1.25%2C6.16%2C6.16%2C0%2C0%2C1%2C2.91%2C3.87A29%2C29%2C0%2C0%2C1%2C169%2C51.6V72.2h-3.59Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M180.17%2C84.75V81.68q4.94.31%2C9%2C.32c3%2C0%2C5.24-.41%2C6.65-1.22A5.74%2C5.74%2C0%2C0%2C0%2C198.6%2C77a34.38%2C34.38%2C0%2C0%2C0%2C.64-7.71V67.72h-.32A6.69%2C6.69%2C0%2C0%2C1%2C196%2C71.31q-2.17%2C1.34-6.66%2C1.34c-2.9%2C0-5.06-.42-6.49-1.28a6.32%2C6.32%2C0%2C0%2C1-2.88-4%2C30.7%2C30.7%2C0%2C0%2C1-.74-7.68V39.56h3.59V59a29.12%2C29.12%2C0%2C0%2C0%2C.57%2C6.85%2C4%2C4%2C0%2C0%2C0%2C2.15%2C2.81%2C13.28%2C13.28%2C0%2C0%2C0%2C5.08.71q4%2C0%2C5.89-1.54a6.59%2C6.59%2C0%2C0%2C0%2C2.31-4.09%2C46.38%2C46.38%2C0%2C0%2C0%2C.44-7.3V39.56h3.59V67.85a43%2C43%2C0%2C0%2C1-1%2C10.4%2C8.37%2C8.37%2C0%2C0%2C1-3.71%2C5.28q-2.76%2C1.66-8.32%2C1.67A94.52%2C94.52%2C0%2C0%2C1%2C180.17%2C84.75Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M213.13%2C72.2V24.65h3.59V72.2Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M229.77%2C71.4a6.29%2C6.29%2C0%2C0%2C1-3.26-4.6A58.17%2C58.17%2C0%2C0%2C1%2C225.8%2C56%2C58.48%2C58.48%2C0%2C0%2C1%2C226.51%2C45a6.38%2C6.38%2C0%2C0%2C1%2C3.26-4.64c1.71-.9%2C4.52-1.35%2C8.45-1.35s6.79.45%2C8.48%2C1.35A6.52%2C6.52%2C0%2C0%2C1%2C250%2C45%2C56.15%2C56.15%2C0%2C0%2C1%2C250.7%2C56%2C55.85%2C55.85%2C0%2C0%2C1%2C250%2C66.8a6.42%2C6.42%2C0%2C0%2C1-3.26%2C4.6c-1.69.88-4.51%2C1.32-8.48%2C1.32S231.48%2C72.28%2C229.77%2C71.4Zm14.72-2.78a4.48%2C4.48%2C0%2C0%2C0%2C2.21-3.49%2C66%2C66%2C0%2C0%2C0%2C.42-9.18%2C67%2C67%2C0%2C0%2C0-.42-9.22%2C4.61%2C4.61%2C0%2C0%2C0-2.21-3.55c-1.19-.66-3.29-1-6.27-1s-5.07.33-6.24%2C1a4.61%2C4.61%2C0%2C0%2C0-2.18%2C3.52%2C69.07%2C69.07%2C0%2C0%2C0-.41%2C9.25%2C68.13%2C68.13%2C0%2C0%2C0%2C.41%2C9.18A4.5%2C4.5%2C0%2C0%2C0%2C232%2C68.62q1.76%2C1%2C6.24%2C1C241.2%2C69.58%2C243.3%2C69.26%2C244.49%2C68.62Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M274.28%2C72.46a38.71%2C38.71%2C0%2C0%2C1-4.32.26c-3.63%2C0-6.3-.58-8-1.73a7.86%2C7.86%2C0%2C0%2C1-3.33-5.12%2C50.73%2C50.73%2C0%2C0%2C1-.73-10%2C43.71%2C43.71%2C0%2C0%2C1%2C.86-10%2C8.36%2C8.36%2C0%2C0%2C1%2C3.42-5.18q2.57-1.7%2C7.68-1.7a37.92%2C37.92%2C0%2C0%2C1%2C4.29.26%2C26.45%2C26.45%2C0%2C0%2C1%2C3.71.64v4.93a35.76%2C35.76%2C0%2C0%2C0-6.46-.58%2C9.62%2C9.62%2C0%2C0%2C0-4.77.9%2C4.57%2C4.57%2C0%2C0%2C0-2%2C3.23%2C41%2C41%2C0%2C0%2C0-.48%2C7.45%2C39.8%2C39.8%2C0%2C0%2C0%2C.51%2C7.56%2C4.47%2C4.47%2C0%2C0%2C0%2C2%2C3.2%2C10.53%2C10.53%2C0%2C0%2C0%2C4.83.83%2C35.91%2C35.91%2C0%2C0%2C0%2C6.59-.58v4.93A28.78%2C28.78%2C0%2C0%2C1%2C274.28%2C72.46Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M285.48%2C70.54q-2.21-2.17-2.21-7.42a16.46%2C16.46%2C0%2C0%2C1%2C.84-5.89%2C5.51%2C5.51%2C0%2C0%2C1%2C2.81-3.07%2C13.06%2C13.06%2C0%2C0%2C1%2C5.57-1c2.18%2C0%2C5.31.08%2C9.41.25V51.72a15.23%2C15.23%2C0%2C0%2C0-.58-5%2C3.09%2C3.09%2C0%2C0%2C0-2.17-1.92%2C22.33%2C22.33%2C0%2C0%2C0-5.38-.45c-1.19%2C0-2.69.06-4.48.19s-3.18.28-4.16.45V40a57.8%2C57.8%2C0%2C0%2C1%2C10.62-.9q5.31%2C0%2C7.94%2C1.22a6.38%2C6.38%2C0%2C0%2C1%2C3.52%2C3.87%2C25.3%2C25.3%2C0%2C0%2C1%2C.9%2C7.71V72.2h-5.64L302.22%2C68h-.39a6.59%2C6.59%2C0%2C0%2C1-3.68%2C3.78%2C15.69%2C15.69%2C0%2C0%2C1-5.72%2C1Q287.69%2C72.72%2C285.48%2C70.54ZM298.7%2C67a4%2C4%2C0%2C0%2C0%2C2.17-1.92%2C13.75%2C13.75%2C0%2C0%2C0%2C1-6V57.55H294a9.3%2C9.3%2C0%2C0%2C0-2.95.35%2C2.19%2C2.19%2C0%2C0%2C0-1.34%2C1.41%2C10.18%2C10.18%2C0%2C0%2C0-.39%2C3.29%2C8.78%2C8.78%2C0%2C0%2C0%2C.42%2C3.14%2C2.44%2C2.44%2C0%2C0%2C0%2C1.6%2C1.41%2C13.17%2C13.17%2C0%2C0%2C0%2C3.68.38A10.93%2C10.93%2C0%2C0%2C0%2C298.7%2C67Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M335.62%2C54a33.45%2C33.45%2C0%2C0%2C0-.41-6.37%2C3.33%2C3.33%2C0%2C0%2C0-1.57-2.46%2C9.56%2C9.56%2C0%2C0%2C0-4-.58%2C6.79%2C6.79%2C0%2C0%2C0-4.35%2C1.15%2C5.33%2C5.33%2C0%2C0%2C0-1.79%2C3.33%2C37.72%2C37.72%2C0%2C0%2C0-.38%2C6.21V72.2h-6.21V39.56h5.63l.26%2C4.36h.44a7.45%2C7.45%2C0%2C0%2C1%2C3.2-3.62%2C11.88%2C11.88%2C0%2C0%2C1%2C5.89-1.25%2C11.25%2C11.25%2C0%2C0%2C1%2C6.05%2C1.31%2C6.53%2C6.53%2C0%2C0%2C1%2C2.72%2C3.94%2C29.52%2C29.52%2C0%2C0%2C1%2C.7%2C7.3V72.2h-6.21Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M357.32%2C72.2l-9.86-32.64h6.4l7.3%2C26.05h.51l7.23-26h6.34L365.38%2C72.2Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M380.71%2C70.54q-2.2-2.17-2.21-7.42a16.46%2C16.46%2C0%2C0%2C1%2C.84-5.89%2C5.51%2C5.51%2C0%2C0%2C1%2C2.81-3.07%2C13.06%2C13.06%2C0%2C0%2C1%2C5.57-1c2.18%2C0%2C5.31.08%2C9.41.25V51.72a15.23%2C15.23%2C0%2C0%2C0-.58-5%2C3.09%2C3.09%2C0%2C0%2C0-2.17-1.92A22.33%2C22.33%2C0%2C0%2C0%2C389%2C44.3c-1.19%2C0-2.69.06-4.48.19s-3.18.28-4.16.45V40a57.8%2C57.8%2C0%2C0%2C1%2C10.62-.9c3.55%2C0%2C6.19.41%2C7.94%2C1.22a6.38%2C6.38%2C0%2C0%2C1%2C3.52%2C3.87%2C25.3%2C25.3%2C0%2C0%2C1%2C.9%2C7.71V72.2H397.7L397.45%2C68h-.39a6.59%2C6.59%2C0%2C0%2C1-3.68%2C3.78%2C15.69%2C15.69%2C0%2C0%2C1-5.72%2C1Q382.92%2C72.72%2C380.71%2C70.54ZM393.93%2C67a4%2C4%2C0%2C0%2C0%2C2.17-1.92%2C13.75%2C13.75%2C0%2C0%2C0%2C1-6V57.55h-7.87a9.3%2C9.3%2C0%2C0%2C0-2.95.35A2.19%2C2.19%2C0%2C0%2C0%2C385%2C59.31a10.18%2C10.18%2C0%2C0%2C0-.39%2C3.29%2C8.78%2C8.78%2C0%2C0%2C0%2C.42%2C3.14%2C2.44%2C2.44%2C0%2C0%2C0%2C1.6%2C1.41%2C13.17%2C13.17%2C0%2C0%2C0%2C3.68.38A10.93%2C10.93%2C0%2C0%2C0%2C393.93%2C67Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M416.58%2C72.46c-2-.17-3.73-.36-5.18-.58v-5a77.88%2C77.88%2C0%2C0%2C0%2C9.79.58A12.66%2C12.66%2C0%2C0%2C0%2C425.1%2C67a2.63%2C2.63%2C0%2C0%2C0%2C1.66-1.34%2C6.93%2C6.93%2C0%2C0%2C0%2C.38-2.63%2C10.13%2C10.13%2C0%2C0%2C0-.25-2.72%2C1.7%2C1.7%2C0%2C0%2C0-.9-1.09%2C8.75%2C8.75%2C0%2C0%2C0-2.24-.48l-7-1c-2.43-.29-4.07-1.14-4.93-2.52s-1.28-3.58-1.28-6.56a10.91%2C10.91%2C0%2C0%2C1%2C1.41-6.08%2C6.88%2C6.88%2C0%2C0%2C1%2C3.87-2.85%2C22.85%2C22.85%2C0%2C0%2C1%2C6.37-.74c1.62%2C0%2C3.32.09%2C5.09.26a27%2C27%2C0%2C0%2C1%2C4.32.7v4.93a60.27%2C60.27%2C0%2C0%2C0-9-.64%2C10%2C10%2C0%2C0%2C0-4.74.8c-.89.53-1.34%2C1.7-1.34%2C3.49a9.81%2C9.81%2C0%2C0%2C0%2C.22%2C2.49%2C1.65%2C1.65%2C0%2C0%2C0%2C.87%2C1.09%2C6.53%2C6.53%2C0%2C0%2C0%2C2.05.51l7.23.9a9.89%2C9.89%2C0%2C0%2C1%2C3.61%2C1.09%2C4.77%2C4.77%2C0%2C0%2C1%2C2%2C2.65%2C17.4%2C17.4%2C0%2C0%2C1%2C.67%2C5.54A12.27%2C12.27%2C0%2C0%2C1%2C431.91%2C69a6.46%2C6.46%2C0%2C0%2C1-3.65%2C3%2C20.26%2C20.26%2C0%2C0%2C1-6.24.8C420.4%2C72.72%2C418.59%2C72.63%2C416.58%2C72.46Z%22%2F%3E%3C%2Fg%3E%3Cg%20class%3D%22cls-3%22%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M77.84.07h-.33a14.31%2C14.31%2C0%2C0%2C0-14%2C14.63v0h0v0a28.13%2C28.13%2C0%2C0%2C1-1.29%2C9.09%2C28.63%2C28.63%2C0%2C0%2C1-5.42%2C9.92%2C28.56%2C28.56%2C0%2C0%2C1-35.57%2C6.69h0A14.3%2C14.3%2C0%2C1%2C0%2C14.37%2C67.3a14.45%2C14.45%2C0%2C0%2C0%2C7-1.82c.15-.11.31-.21.47-.31h0l.48-.29A28.53%2C28.53%2C0%2C0%2C1%2C36.71%2C61a28%2C28%2C0%2C0%2C1%2C5%2C.45%2C28.45%2C28.45%2C0%2C0%2C1%2C7.65%2C2.49l0%2C0c.72.35%2C1.44.74%2C2.13%2C1.16h0a27.94%2C27.94%2C0%2C0%2C1%2C6.19%2C5.07%2C28.86%2C28.86%2C0%2C0%2C1%2C3.4%2C4.5%2C28.81%2C28.81%2C0%2C0%2C1%2C4.15%2C13.53c0%2C.22%2C0%2C.44%2C0%2C.66s0%2C.49%2C0%2C.74A14.3%2C14.3%2C0%2C1%2C0%2C86.46%2C76.09L86.34%2C76h0A28.6%2C28.6%2C0%2C0%2C1%2C72.86%2C42.53a29.14%2C29.14%2C0%2C0%2C1%2C2.23-5.24%2C28.57%2C28.57%2C0%2C0%2C1%2C3.19-4.68%2C28.25%2C28.25%2C0%2C0%2C1%2C6.92-6h0A14.3%2C14.3%2C0%2C0%2C0%2C77.84.07%22%2F%3E%3C%2Fg%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M14.37%2C38.56a14.39%2C14.39%2C0%2C1%2C0%2C12.3%2C6.9%2C14.28%2C14.28%2C0%2C0%2C0-12.3-6.9%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M79.58%2C74.27a14.39%2C14.39%2C0%2C1%2C0%2C12.3%2C6.9%2C14.36%2C14.36%2C0%2C0%2C0-12.3-6.9%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M77.87%2C0A14.39%2C14.39%2C0%2C1%2C0%2C90.16%2C6.9%2C14.37%2C14.37%2C0%2C0%2C0%2C77.87%2C0%22%2F%3E%3C%2Fsvg%3E';\n  anchorElement.appendChild(imageElement);\n  anchorElement.title = 'About Phylocanvas...';\n  anchorElement.href = 'http://phylocanvas.org/';\n  anchorElement.target = '_blank';\n  anchorElement.className = 'phylocanvas-context-menu-about';\n  return anchorElement;\n}\n\nexport default [ createAboutLink() ];\n","const windowURL = window.URL || window.webkitURL;\nfunction createBlobUrl(data, type = 'text/plain;charset=utf-8') {\n  const blob = new Blob([ data ], { type });\n  return windowURL.createObjectURL(blob);\n}\n\nexport function createAnchorElement(text = 'link', filename = 'file', getBlobUrl) {\n  const anchorElement = document.createElement('a');\n  anchorElement.appendChild(document.createTextNode(text));\n  anchorElement.download = filename;\n  anchorElement.addEventListener('click', () => {\n    anchorElement.href = getBlobUrl();\n  });\n\n  return anchorElement;\n}\n\nexport function createImageLink(tree, node, text) {\n  const { filenames } = tree.contextMenu;\n  return createAnchorElement(\n    text,\n    filenames.image,\n    () => tree.ctx.canvas.toDataURL(),\n  );\n}\n\nexport function createLeafLabelsLink(tree, node, text) {\n  const { filenames } = tree.contextMenu;\n  return createAnchorElement(\n    text,\n    filenames.leafLabels,\n    () => createBlobUrl(tree.getLeafLabels(node).join('\\n')),\n  );\n}\n\nexport function createSelectedLabelsLink(tree, node, text) {\n  const { contextMenu, state } = tree;\n  const { selectedIds } = state;\n  const { filenames } = contextMenu;\n  if (selectedIds.length === 0) {\n    return null;\n  }\n  return createAnchorElement(\n    text,\n    filenames.leafLabels,\n    () => createBlobUrl(tree.getNodeLabels(selectedIds).join('\\n')),\n  );\n}\n\nexport function createNewickLink(tree, node, text) {\n  const { filenames } = tree.contextMenu;\n  return createAnchorElement(\n    text,\n    filenames.newick,\n    () => createBlobUrl(tree.getNewick(node)),\n  );\n}\n","import aboutSection from './about';\n\nimport {\n  createLeafLabelsLink,\n  createSelectedLabelsLink,\n  createNewickLink,\n  createImageLink,\n} from './createHtmlElements';\n\nexport const treeMenuItems = [\n  [\n    {\n      text: 'Show labels',\n      handler: tree => tree.toggleLeafLabels(),\n      isActive: tree => tree.state.renderLeafLabels,\n    },\n    {\n      text: 'Align labels',\n      handler: tree => tree.toggleAlignLeafLabels(),\n      isActive: tree => tree.state.alignLabels,\n    },\n  ],\n\n  [\n    {\n      text: 'Fit in panel',\n      handler: tree => tree.fitInPanel(),\n    },\n    {\n      text: 'Expand collapsed subtrees',\n      visible: tree => tree.state.collapsedIds.length > 0,\n      handler: tree => tree.resetCollapsedNodes({ refit: true }),\n    },\n    {\n      text: 'Redraw original tree',\n      handler: tree => tree.setSource(tree.nodes.originalSource),\n    },\n  ],\n\n  [\n    (tree, node) => createLeafLabelsLink(tree, node, 'Export leaf labels'),\n    (tree, node) =>\n      createSelectedLabelsLink(tree, node, 'Export selected labels'),\n    (tree, node) => createNewickLink(tree, node, 'Export as newick file'),\n    (tree, node) => createImageLink(tree, node, 'Export as image'),\n  ],\n\n  aboutSection,\n];\n\nexport const nodeMenuItems = [\n  [\n    {\n      text: (tree, node) => (\n        tree.state.collapsedIds.indexOf(node.id) === -1 ?\n          'Collapse subtree' : 'Expand subtree'\n      ),\n      handler: (tree, node) => tree.collapseNode(node, { refit: true }),\n    },\n    {\n      text: 'Rotate subtree',\n      handler: (tree, node) => tree.rotateNode(node, { refit: false }),\n    },\n  ],\n\n  [\n    {\n      text: 'View subtree',\n      handler: (tree, node) => tree.setRoot(node),\n    },\n    {\n      text: 'Re-root tree',\n      handler: (tree, node) => tree.rerootNode(node),\n    },\n  ],\n\n  [\n    (tree, node) =>\n      createLeafLabelsLink(tree, node, 'Export subtree leaf labels'),\n    (tree, node) =>\n      createNewickLink(tree, node, 'Export subtree as newick file'),\n  ],\n\n  aboutSection,\n];\n","export default {\n  filenames: {\n    image: 'phylocanvas.png',\n    leafLabels: 'phylocanvas-leaf-labels.txt',\n    newick: 'phylocanvas.nwk',\n  },\n};\n","import { utils } from '@cgps/phylocanvas';\n\nimport closeMenu from './closeMenu';\nimport mergeMenuItems from './mergeMenuItems';\nimport openMenu from './openMenu';\n\nimport { treeMenuItems, nodeMenuItems } from './menuItems';\nimport defaults from './defaults';\n\nexport default function (tree, decorate) {\n  decorate('init', (delegate, args) => {\n    const state = delegate(...args);\n    const [ options ] = args;\n    const { contextMenu = {} } = options;\n\n    tree.contextMenu = {};\n    tree.contextMenu.invalidate = true;\n\n    if (contextMenu && typeof contextMenu.parent === 'string') {\n      tree.contextMenu.parent =\n        document.querySelector(contextMenu.parent);\n    } else if (contextMenu) {\n      tree.contextMenu.parent = contextMenu.parent;\n    }\n\n    if (!tree.contextMenu.parent) {\n      tree.contextMenu.parent = document.body;\n    }\n\n    tree.contextMenu.el = document.createElement('ul');\n    tree.contextMenu.el.className = 'phylocanvas-context-menu';\n    tree.contextMenu.parent.appendChild(tree.contextMenu.el);\n\n    tree.contextMenu.treeMenuItems = mergeMenuItems(treeMenuItems, contextMenu.treeMenuItems);\n    tree.contextMenu.nodeMenuItems = mergeMenuItems(nodeMenuItems, contextMenu.nodeMenuItems);\n    tree.contextMenu.filenames = { ...defaults.filenames, ...contextMenu.filenames };\n\n    tree.contextMenu.open = openMenu.bind(null, tree);\n    tree.contextMenu.close = closeMenu.bind(null, tree);\n\n    return state;\n  });\n\n  function openContextMenu(e) {\n    const point = utils.mapPoint(tree, e.offsetX, e.offsetY);\n    const node = tree.getNodeAtPoint(point.x, point.y);\n    tree.contextMenu.open(e.pageX, e.pageY, node ? node.id : null);\n  }\n\n  const handleTouchStartEvent = () => { tree.contextMenu.touching = true; };\n  tree.ctx.canvas.addEventListener('touchstart', handleTouchStartEvent);\n\n  const handleContextMenuEvent = e => {\n    e.preventDefault();\n    if (tree.contextMenu.touching) {\n      openContextMenu(e);\n      tree.contextMenu.touching = false;\n    }\n  };\n  tree.ctx.canvas.addEventListener('contextmenu', handleContextMenuEvent);\n\n  const handleMouseDownEvent = e => {\n    if (tree.contextMenu.isOpen || !tree.contextMenu.isOpen && e.button === 2) {\n      e.stopImmediatePropagation();\n    }\n  };\n  tree.ctx.canvas.addEventListener('mousedown', handleMouseDownEvent);\n\n  const handleMouseUpEvent = e => {\n    if (e.button === 2) {\n      e.stopImmediatePropagation();\n      openContextMenu(e);\n    } else if (tree.contextMenu.isOpen) {\n      e.stopImmediatePropagation();\n      tree.contextMenu.close();\n    }\n  };\n  tree.ctx.canvas.addEventListener('mouseup', handleMouseUpEvent);\n\n  decorate('mergeState', (delegate, args) => {\n    const { contextMenu } = tree;\n    if (contextMenu.isOpen && contextMenu.invalidate) {\n      contextMenu.close();\n    }\n    contextMenu.invalidate = true;\n    delegate(...args);\n  });\n\n  decorate('destroy', (delegate, args) => {\n    tree.contextMenu.parent.removeChild(tree.contextMenu.el);\n    tree.ctx.canvas.removeEventListener('touchstart', handleTouchStartEvent);\n    tree.ctx.canvas.removeEventListener('contextmenu', handleContextMenuEvent);\n    tree.ctx.canvas.removeEventListener('mousedown', handleMouseDownEvent);\n    tree.ctx.canvas.removeEventListener('mouseup', handleMouseUpEvent);\n    delegate(...args);\n  });\n}\n"],"sourceRoot":""}